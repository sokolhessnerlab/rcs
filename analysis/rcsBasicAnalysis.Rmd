---
title: "RCS Basic Analysis"
author: "Hayley Brooks"
date: "2022-10-12"
output: html_document
---

```{r setup, include=FALSE}
rm(list=ls())

library('config')
config = config::get()


setup_source = file.path(config$path$code_files$dataSetUp) # run our set up script (which loads all the data)
source(setup_source) #, local = knitr::knit_global())
```


```{r, score-ospan}
#OSPAN Absolute Score: The sum of the correctly recalled elements from only the items in which all the elements are recalled in correct serial order (formally OSPAN Score)

# participants had to keep percent correct math at 85% or above
if (any(ospanDF$percentCorrectMath[ospanDF$...1==25]<85)){
  ospanExclude = ospanDF$subID[ospanDF$...1 ==25 & ospanDF$percentCorrectMath <85]
  ospanDF = ospanDF[which(!ospanDF$subID %in% ospanExclude),] # apply exclusion
}

# subID char won't work when we remove participants for <85 correct math
# score and add to ospanDF
# for (s in 1:nSub) {
#   ospanDF$absScore[ospanDF$subID==subIDchar[s]] = sum(ospanDF$correctCount[ospanDF$correctCount==ospanDF$setSize & ospanDF$subID==subIDchar[s]], na.rm = T)
# 
# }


```

```{r, score-symspan}
#SSPAN Absolute Score: The sum of the correctly recalled elements from only the items in which all the elements are recalled in correct serial order (formally SSPAN Score)

# participants had to keep percent correct symmetry at 85% or above
if (any(symspanDF$percentCorrectSym[symspanDF$...1==14]<85)){
  symspanExclude = symspanDF$subID[symspanDF$...1 ==14 & symspanDF$percentCorrectSym <85]
  symspanDF = symspanDF[which(!symspanDF$subID %in% symspanExclude),] # apply exclusion
}

# subID char won't work when we remove participants for <85 correct symmetry
# score and add to symspanDF
for (s in 1:nSub) {
  symspanDF$absScore[symspanDF$subID==subIDchar[s]] = sum(symspanDF$squareCorrectCount[symspanDF$squareCorrectCount==symspanDF$setSize & symspanDF$subID==subIDchar[s]], na.rm = T)

}

```


```{r, rdm}
pgam = mean(rdmDFclean$choice, na.rm=T) # overall, across rounds
pgamRound1 =mean(rdmDFclean$choice[rdmDFclean$roundRDM==1], na.rm=T) # overall, round 1
pgamRound2 =mean(rdmDFclean$choice[rdmDFclean$roundRDM==2], na.rm=T) # overall, round 2

# differences in pgam from round 1 to round 2:
pgamDiff = RDMqualityCheck$pgambleRound1[!RDMqualityCheck$subID %in% as.numeric(excludeSubID)] - RDMqualityCheck$pgambleRound2[!RDMqualityCheck$subID %in% as.numeric(excludeSubID)]


# pgam in condition (quick estimate - don't make too much of this - doesn't take into account ordder of condition)

mean(rdmDFclean$choice[rdmDFclean$strategy==0 & rdmDFclean$roundRDM==1], na.rm=TRUE)
mean(rdmDFclean$choice[rdmDFclean$strategy==0 & rdmDFclean$roundRDM==2], na.rm=TRUE)

mean(rdmDFclean$choice[rdmDFclean$strategy==1 & rdmDFclean$roundRDM==1], na.rm=TRUE)
mean(rdmDFclean$choice[rdmDFclean$strategy==1 & rdmDFclean$roundRDM==2], na.rm=TRUE)

```

